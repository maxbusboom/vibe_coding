"use strict";self.webpackHotUpdateass_teroids(792,{328:()=>{class t{constructor(t,s,i=0,e=0){this.position=t,this.velocity=s,this.rotation=i,this.radius=e}update(t,s,i,...e){this.position=this.position.add(this.velocity.scale(t)),this.handleScreenWrapping(s,i)}handleScreenWrapping(t,s){this.position.x<-this.radius?this.position.x=t+this.radius:this.position.x>t+this.radius&&(this.position.x=-this.radius),this.position.y<-this.radius?this.position.y=s+this.radius:this.position.y>s+this.radius&&(this.position.y=-this.radius)}}class s{constructor(t,s){this.x=t,this.y=s}add(t){return new s(this.x+t.x,this.y+t.y)}subtract(t){return new s(this.x-t.x,this.y-t.y)}scale(t){return new s(this.x*t,this.y*t)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){const t=this.length();return 0===t?new s(0,0):new s(this.x/t,this.y/t)}clone(){return new s(this.x,this.y)}rotate(t){const i=Math.cos(t),e=Math.sin(t);return new s(this.x*i-this.y*e,this.x*e+this.y*i)}distance(t){const s=this.x-t.x,i=this.y-t.y;return Math.sqrt(s*s+i*i)}}class i extends t{constructor(t,s){super(t,s,0,3),this.lifetime=2,this.timeAlive=0}update(t,s,i){super.update(t,s,i),this.timeAlive+=t}isExpired(){return this.timeAlive>=this.lifetime}}class e extends t{constructor(t,s,i){super(t,s,i,15),this.maxSpeed=200,this.acceleration=200,this.rotationSpeed=4,this.fireRate=.25,this.timeSinceLastShot=0,this.accelerating=!1,this.destroyed=!1,this.respawning=!1,this.respawnBlinkTimer=0,this.respawnBlinkInterval=.1,this.respawnDuration=3}update(t,i,e,h){if(!this.destroyed){if(this.respawning&&(this.respawnBlinkTimer+=t,this.respawnBlinkTimer>=this.respawnDuration&&(this.respawning=!1,this.respawnBlinkTimer=0)),this.timeSinceLastShot+=t,h&&((h.isKeyPressed("ArrowLeft")||h.isKeyPressed("a"))&&(this.rotation-=this.rotationSpeed*t),(h.isKeyPressed("ArrowRight")||h.isKeyPressed("d"))&&(this.rotation+=this.rotationSpeed*t),this.accelerating=h.isKeyPressed("ArrowUp")||h.isKeyPressed("w"),this.accelerating)){const i=new s(Math.cos(this.rotation),Math.sin(this.rotation)).scale(this.acceleration*t);this.velocity=this.velocity.add(i);const e=this.velocity.length();e>this.maxSpeed&&(this.velocity=this.velocity.scale(this.maxSpeed/e))}this.velocity=this.velocity.scale(Math.pow(.99,60*t)),super.update(t,i,e)}}fire(){this.timeSinceLastShot=0;const t=new s(Math.cos(this.rotation),Math.sin(this.rotation)).scale(this.radius),e=this.position.add(t),h=new s(Math.cos(this.rotation),Math.sin(this.rotation)).scale(400).add(this.velocity);return new i(e,h)}canFire(){return this.timeSinceLastShot>=this.fireRate}isAccelerating(){return this.accelerating}isDestroyed(){return this.destroyed}destroy(){this.destroyed=!0}respawn(t,s,i){this.position=t,this.velocity=s,this.rotation=i,this.destroyed=!1,this.respawning=!0,this.respawnBlinkTimer=0}isRespawning(){return this.respawning}isVisibleDuringRespawn(){return!this.respawning||Math.floor(this.respawnBlinkTimer/this.respawnBlinkInterval)%2==0}}class h extends t{constructor(t,s,i,e,a){let n;switch(a){case"large":n=40;break;case"medium":n=20;break;case"small":n=10}if(super(t,s,i,n),this.size=a,this.vertices=[],this.rotationSpeed=e,this.generateVertices(),!h.buttImage){h.buttImage=new Image;const t=window.location.hostname.includes("github.io")?"/ass-teroids":"";h.buttImage.src=`${t}/assets/butt.png`,h.buttImage.onload=()=>{h.imageLoaded=!0},h.buttImage.onerror=()=>{h.buttImage.src=`${t}/assets/butt.svg`,h.buttImage.onload=()=>{h.imageLoaded=!0}}}}update(t,s,i){this.rotation+=this.rotationSpeed*t,super.update(t,s,i)}split(){if("small"===this.size)return[];const t="large"===this.size?"medium":"small",i=[];for(let e=0;e<2;e++){const e=Math.random()*Math.PI*2,a=this.velocity.length()*(1.2+.4*Math.random()),n=new s(Math.cos(e)*a,Math.sin(e)*a),r=Math.random()*Math.PI*2,o=3*(Math.random()-.5),c=new s((Math.random()-.5)*this.radius,(Math.random()-.5)*this.radius);i.push(new h(this.position.add(c),n,r,o,t))}return i}getScoreValue(){switch(this.size){case"large":return 20;case"medium":return 50;case"small":return 100}}getVertices(){return this.vertices.map((t=>t.rotate(this.rotation)))}generateVertices(){const t=this.radius;if(this.vertices=[],this.vertices.push(new s(0,.7*-t)),this.vertices.push(new s(.6*-t,.5*-t)),this.vertices.push(new s(.8*-t,.2*-t)),this.vertices.push(new s(.9*-t,0)),this.vertices.push(new s(.8*-t,.4*t)),this.vertices.push(new s(.5*-t,.8*t)),this.vertices.push(new s(.2*-t,.9*t)),this.vertices.push(new s(0,.7*t)),this.vertices.push(new s(.2*t,.9*t)),this.vertices.push(new s(.5*t,.8*t)),this.vertices.push(new s(.8*t,.4*t)),this.vertices.push(new s(.9*t,0)),this.vertices.push(new s(.8*t,.2*-t)),this.vertices.push(new s(.6*t,.5*-t)),this.vertices.push(new s(0,.7*-t)),"small"!==this.size){const s="large"===this.size?.15:.1;for(let i=0;i<this.vertices.length;i++){const e=i>=6&&i<=8?.3*s:s;this.vertices[i].x+=(Math.random()-.5)*e*t,this.vertices[i].y+=(Math.random()-.5)*e*t}}}}h.buttImage=null,h.imageLoaded=!1;class a{constructor(t){this.canvas=t,this.ctx=t.getContext("2d")}clear(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}renderShip(t){const{position:s,rotation:i}=t;this.ctx.save(),this.ctx.translate(s.x,s.y),this.ctx.rotate(i),t.isRespawning()&&!t.isVisibleDuringRespawn()||(this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(15,0),this.ctx.lineTo(-10,10),this.ctx.lineTo(-5,0),this.ctx.lineTo(-10,-10),this.ctx.lineTo(15,0),this.ctx.stroke(),this.ctx.closePath()),!t.isAccelerating()||t.isRespawning()&&!t.isVisibleDuringRespawn()||(this.ctx.strokeStyle="#FFA500",this.ctx.beginPath(),this.ctx.moveTo(-5,0),this.ctx.lineTo(-15,5),this.ctx.lineTo(-12,0),this.ctx.lineTo(-15,-5),this.ctx.lineTo(-5,0),this.ctx.stroke(),this.ctx.closePath()),this.ctx.restore()}renderAsteroid(t){const{position:s,rotation:i,size:e,radius:a}=t;if(this.ctx.save(),this.ctx.translate(s.x,s.y),this.ctx.rotate(i),h.buttImage&&h.imageLoaded){let t=1;switch(e){case"large":t=1;break;case"medium":t=.6;break;case"small":t=.3}const s=2.5*a;this.ctx.drawImage(h.buttImage,-s/2,-s/2,s,s)}else{const s=t.getVertices();this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(s[0].x,s[0].y);for(let t=1;t<s.length;t++)this.ctx.lineTo(s[t].x,s[t].y);this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle="rgba(255, 200, 200, 0.2)",this.ctx.fill()}this.ctx.restore()}renderBullet(t){const{position:s,radius:i}=t;this.ctx.fillStyle="white",this.ctx.beginPath(),this.ctx.arc(s.x,s.y,i,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()}renderParticle(t){const{position:s,radius:i,lifetime:e,maxLifetime:h}=t,a=e/h;this.ctx.fillStyle=`rgba(255, 255, 255, ${a})`,this.ctx.beginPath(),this.ctx.arc(s.x,s.y,i,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()}}class n{constructor(){this.keys={},window.addEventListener("keydown",(t=>{this.keys[t.key]=!0})),window.addEventListener("keyup",(t=>{this.keys[t.key]=!1}))}isKeyPressed(t){return!0===this.keys[t]}}class r{static checkCollision(t,s){return t.position.distance(s.position)<t.radius+s.radius}}class o extends t{constructor(t,s,i){super(t,s,0,2),this.maxLifetime=i,this.lifetime=i}update(t){this.position=this.position.add(this.velocity.scale(t)),this.lifetime-=t,this.velocity=this.velocity.scale(.97)}isExpired(){return this.lifetime<=0}}class c{constructor(){this.asteroids=[],this.bullets=[],this.particles=[],this.score=0,this.lives=3,this.gameOver=!1,this.level=1,this.lastTime=0,this.asteroidSpawnInterval=3e3,this.lastAsteroidSpawn=0,this.canvas=document.getElementById("game-canvas"),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.renderer=new a(this.canvas),this.inputHandler=new n,this.scoreDisplay=document.getElementById("score-display"),this.livesDisplay=document.getElementById("lives-display"),this.gameOverDisplay=document.getElementById("game-over"),this.finalScoreDisplay=document.getElementById("final-score"),this.restartButton=document.getElementById("restart-button"),this.ship=new e(new s(this.canvasWidth/2,this.canvasHeight/2),new s(0,0),0),this.restartButton.addEventListener("click",(()=>this.restart()))}start(){this.spawnInitialAsteroids(),this.lastTime=performance.now(),this.gameLoop(this.lastTime)}gameLoop(t){const s=(t-this.lastTime)/1e3;this.lastTime=t,this.update(s),this.render(),this.gameOver||requestAnimationFrame((t=>this.gameLoop(t)))}update(t){const s=performance.now();if(s-this.lastAsteroidSpawn>this.asteroidSpawnInterval&&(this.spawnRandomAsteroid(),this.lastAsteroidSpawn=s),this.ship.isDestroyed())this.ship.isRespawning()&&this.ship.update(t,this.canvasWidth,this.canvasHeight,this.inputHandler);else if(this.ship.update(t,this.canvasWidth,this.canvasHeight,this.inputHandler),this.inputHandler.isKeyPressed(" ")&&this.ship.canFire()){const t=this.ship.fire();this.bullets.push(t)}for(let s=this.bullets.length-1;s>=0;s--)this.bullets[s].update(t,this.canvasWidth,this.canvasHeight),this.bullets[s].isExpired()&&this.bullets.splice(s,1);for(let s=this.asteroids.length-1;s>=0;s--)this.asteroids[s].update(t,this.canvasWidth,this.canvasHeight);for(let s=this.particles.length-1;s>=0;s--)this.particles[s].update(t),this.particles[s].isExpired()&&this.particles.splice(s,1);this.checkCollisions(),0===this.asteroids.length&&(this.level++,this.spawnInitialAsteroids()),this.updateUI()}render(){this.renderer.clear(),this.ship.isDestroyed()&&!this.ship.isRespawning()||this.renderer.renderShip(this.ship);for(const t of this.bullets)this.renderer.renderBullet(t);for(const t of this.asteroids)this.renderer.renderAsteroid(t);for(const t of this.particles)this.renderer.renderParticle(t)}checkCollisions(){for(let t=this.bullets.length-1;t>=0;t--)for(let s=this.asteroids.length-1;s>=0;s--)if(r.checkCollision(this.bullets[t],this.asteroids[s])){this.createExplosion(this.asteroids[s].position,10);const i=this.asteroids[s].split();i.length>0&&this.asteroids.push(...i),this.score+=this.asteroids[s].getScoreValue(),this.asteroids.splice(s,1),this.bullets.splice(t,1);break}if(!this.ship.isDestroyed()&&!this.ship.isRespawning())for(let t=this.asteroids.length-1;t>=0;t--)if(r.checkCollision(this.ship,this.asteroids[t])){this.lives--,this.createExplosion(this.ship.position,20),this.ship.destroy(),this.lives<=0?(this.gameOver=!0,this.gameOverDisplay.style.display="block",this.finalScoreDisplay.textContent=this.score.toString()):setTimeout((()=>{this.ship.respawn(new s(this.canvasWidth/2,this.canvasHeight/2),new s(0,0),0)}),2e3);break}}spawnInitialAsteroids(){const t=3+Math.min(2*this.level,12);for(let s=0;s<t;s++)this.spawnRandomAsteroid()}spawnRandomAsteroid(){let t;switch(Math.floor(4*Math.random())){case 0:t=new s(Math.random()*this.canvasWidth,-50);break;case 1:t=new s(this.canvasWidth+50,Math.random()*this.canvasHeight);break;case 2:t=new s(Math.random()*this.canvasWidth,this.canvasHeight+50);break;default:t=new s(-50,Math.random()*this.canvasHeight)}const i=new s(this.canvasWidth/2-t.x,this.canvasHeight/2-t.y).normalize(),e=(Math.random()-.5)*Math.PI/2,a=i.rotate(e),n=50+30*Math.random()*Math.min(this.level,5),r=a.scale(n),o=Math.random()*Math.PI*2,c=2*(Math.random()-.5),l=new h(t,r,o,c,"large");this.asteroids.push(l),this.lastAsteroidSpawn=performance.now()}createExplosion(t,i){for(let e=0;e<i;e++){const i=Math.random()*Math.PI*2,e=30+70*Math.random(),h=new s(Math.cos(i)*e,Math.sin(i)*e),a=.5+1*Math.random();this.particles.push(new o(t.clone(),h,a))}}updateUI(){this.scoreDisplay.textContent=`Score: ${this.score}`,this.livesDisplay.textContent=`Lives: ${this.lives}`}restart(){this.score=0,this.lives=3,this.level=1,this.gameOver=!1,this.asteroids=[],this.bullets=[],this.particles=[],this.ship.respawn(new s(this.canvasWidth/2,this.canvasHeight/2),new s(0,0),0),this.gameOverDisplay.style.display="none",this.start()}}window.addEventListener("load",(()=>{(new c).start()}))}},(function(t){t.h=()=>"79ad5c06688062cbe113"}));